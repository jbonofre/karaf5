<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Licensed to the Apache Software Foundation (ASF) under one
  ~ or more contributor license agreements.  See the NOTICE file
  ~ distributed with this work for additional information
  ~ regarding copyright ownership.  The ASF licenses this file
  ~ to you under the Apache License, Version 2.0 (the
  ~ "License"); you may not use this file except in compliance
  ~ with the License.  You may obtain a copy of the License at
  ~
  ~    http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->
<assembly xmlns="http://maven.apache.org/ASSEMBLY/2.1.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/ASSEMBLY/2.1.0 http://maven.apache.org/xsd/assembly-2.1.0.xsd">

    <id>karaf-jar</id>

    <formats>
        <format>jar</format>
    </formats>

    <includeBaseDirectory>false</includeBaseDirectory>

    <dependencySets>
        <dependencySet>
            <outputDirectory>/</outputDirectory>
            <useProjectArtifact>true</useProjectArtifact>
            <unpack>true</unpack>
            <scope>runtime</scope>
        </dependencySet>
        <dependencySet>
            <outputDirectory>/system</outputDirectory>
            <useProjectArtifact>false</useProjectArtifact>
            <unpack>false</unpack>
            <scope>provided</scope>
            <includes>
                <include>org.apache.karaf.features:org.apache.karaf.features.extension</include>
                <include>org.apache.karaf.services:org.apache.karaf.services.eventadmin</include>
                <include>org.apache.felix:org.apache.felix.metatype</include>
                <include>org.ops4j.pax.url:pax-url-aether</include>
                <include>org.ops4j.pax.logging:pax-logging-api</include>
                <include>org.ops4j.pax.logging:pax-logging-log4j2</include>
                <include>org.fusesource.jansi:jansi</include>
                <include>org.osgi:org.osgi.util.promise</include>
                <include>org.apache.felix:org.apache.felix.coordinator</include>
                <include>org.apache.felix:org.apache.felix.converter</include>
                <include>org.osgi:org.osgi.util.function</include>
                <include>org.apache.felix:org.apache.felix.configadmin</include>
                <include>org.apache.felix:org.apache.felix.configadmin.plugin.interpolation</include>
                <include>org.apache.felix:org.apache.felix.configurator</include>
                <include>org.apache.sling:org.apache.sling.commons.johnzon</include>
                <include>org.apache.felix:org.apache.felix.cm.json</include>
                <include>org.apache.felix:org.apache.felix.fileinstall</include>
                <include>jakarta.activation:jakarta.activation-api</include>
                <include>jakarta.xml.bind:jakarta.xml.bind-api</include>
                <include>com.sun.istack:istack-commons-runtime</include>
                <include>org.apache.servicemix.bundles:org.apache.servicemix.bundles.txw2</include>
                <include>org.glassfish.jaxb:jaxb-runtime</include>
                <include>org.apache.karaf.features:org.apache.karaf.features.core</include>
            </includes>
        </dependencySet>
    </dependencySets>

    <containerDescriptorHandlers>
        <containerDescriptorHandler>
            <handlerName>metaInf-services</handlerName>
        </containerDescriptorHandler>
    </containerDescriptorHandlers>

</assembly>